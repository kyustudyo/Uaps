# 인수인계 문서 - 2025-10-16

## ⚠️ 최우선 과제: 공중 유닛 드래그 박스 버그 수정

### 문제
AirTransportThreeRobot 연속 클릭 후 드래그하면 선택 박스(네모)가 사라지지 않음

### 원인
1. **Rigidbody 컴포넌트**: 물리 시뮬레이션으로 Collider 위치 불안정 → Raycast 결과 불안정 → `EventSystem.current.IsPointerOverGameObject()` 잘못된 값 반환
2. **Worker + AirTransportThreeRobot 중복**: AirTransportThreeRobot는 AbstractUnit 직접 상속해야 하는데 Worker도 있음 → 중복 로직 실행

### 해결 방법
Unity에서 `Assets/Units/Air Transport/AirTransportThreeRobot.prefab` 열고:
1. **Rigidbody 컴포넌트 제거** (공중 유닛이라고 Rigidbody가 필요한 건 아님)
2. **Worker 스크립트 제거** (AirTransportThreeRobot만 남김 - AbstractUnit 직접 상속)

WorkerThreeRobot과 동일한 구조가 되어야 함:
- Transform, Animator, NavMeshAgent
- AirTransportThreeRobot 스크립트
- CapsuleCollider
- BehaviorGraphAgent

### 완료 후 체크리스트
- [ ] Unity에서 프리팹 수정 완료
- [ ] 테스트: 공중 유닛 연속 클릭 → 드래그 → 박스 정상 해제 확인
- [ ] `LONG_TERM_TODO.md`에서 "공중 유닛 더블클릭 시 드래그 박스 미해제 버그" 항목 체크 또는 삭제
- [ ] 이 인수인계 문서에 완료 표시

### 테스트 시나리오
1. AirTransportThreeRobot 스폰 버튼 클릭
2. 월드에 클릭하여 유닛 스폰
3. 스폰된 유닛을 **빠르게 2-3번 연속 클릭**
4. 드래그 선택 시도
5. 마우스 떼기
6. ✅ 선택 박스가 사라지는지 확인

---

## 📋 최근 작업 내역 (2025-10-16)

### 완료된 작업
1. **Rule 10 추가**: TODO_MANAGEMENT_RULE
   - TODO는 `LONG_TERM_TODO.md`에 추가
   - 룰은 안정적, TODO는 유동적 → 분리 관리

2. **RobotPartType enum 중복 제거**
   - 컴파일 에러 수정: WorkerThreeRobot.cs, AirTransportThreeRobot.cs에서 중복 enum 제거
   - RobotPart.cs에만 정의 유지

3. **호버 애니메이션 주석 처리**
   - AirTransportThreeRobot.cs의 `ApplyHoverAnimation()` 호출 주석 처리 (테스트용)
   - 버그 원인 분석 중

4. **버그 원인 분석**
   - Rigidbody + Worker 스크립트 중복이 문제임을 확인
   - LONG_TERM_TODO.md에 버그 항목 추가

### 현재 상태
- ⚠️ 공중 유닛 드래그 박스 버그 미해결 (최우선 과제)
- PlayerInput.cs는 수정 불필요 (코드 로직은 정상)
- 프리팹 컴포넌트 구조가 문제

---

## 🔍 참고 정보

### 파일 위치
- 버그 관련 프리팹: `Assets/Units/Air Transport/AirTransportThreeRobot.prefab`
- TODO 파일: `LONG_TERM_TODO.md`
- PlayerInput 스크립트: `Assets/Scripts/Player/PlayerInput.cs`

### 컴포넌트 비교
**WorkerThreeRobot (정상):**
- Transform, Animator, NavMeshAgent
- WorkerThreeRobot
- CapsuleCollider
- BehaviorGraphAgent

**AirTransportThreeRobot (문제):**
- Transform, NavMeshAgent, Animator
- ❌ Rigidbody (제거 필요)
- CapsuleCollider
- ❌ Worker (제거 필요)
- AirTransportThreeRobot
- BehaviorGraphAgent

---

## 📌 다음 세션 시작 시
1. **이 문서를 먼저 읽고** 최우선 과제 확인
2. 공중 유닛 버그 수정 (Unity 프리팹 수정)
3. 테스트 후 LONG_TERM_TODO.md 업데이트
4. 이 문서에 완료 표시

**중요**: 버그 수정이 완료되기 전까지는 다른 작업을 진행하지 말 것!

---

**작성일**: 2025-10-16
**다음 인수인계**: 버그 수정 완료 후 작성
