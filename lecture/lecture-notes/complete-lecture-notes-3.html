<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URTS 강의 노트 - 3페이지</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .content {
            padding: 30px;
        }
        
        .lecture-section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }
        
        .lecture-title {
            color: #2c3e50;
            margin-top: 0;
            font-size: 1.8em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .lecture-goal {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .lecture-goal h3 {
            color: #2980b9;
            margin-top: 0;
        }
        
        .content-section {
            margin: 25px 0;
        }
        
        .content-section h3 {
            color: #2c3e50;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 8px;
        }
        
        .tech-stack {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #17a2b8;
        }
        
        .tech-stack h4 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .content-list {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .content-list li {
            margin: 8px 0;
            color: #2c3e50;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .code-block .comment {
            color: #95a5a6;
            font-style: italic;
        }
        
        .code-block .keyword {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .code-block .class-name {
            color: #3498db;
            font-weight: bold;
        }
        
        .code-block .method-name {
            color: #f39c12;
            font-weight: bold;
        }
        
        .code-block .property-name {
            color: #2ecc71;
            font-weight: bold;
        }
        
        .code-block .field-name {
            color: #9b59b6;
        }
        
        .code-block .string {
            color: #e67e22;
        }
        
        .code-block .number {
            color: #e67e22;
        }
        
        .code-block .parameter {
            color: #f39c12;
        }
        
        .info-box {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .info-box h4 {
            color: #27ae60;
            margin-top: 0;
        }
        
        .warning-box {
            background: #fdf2e9;
            border: 2px solid #e67e22;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .warning-box h4 {
            color: #e67e22;
            margin-top: 0;
        }
        
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .toc h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .toc ul {
            list-style: none;
            padding: 0;
        }
        
        .toc li {
            margin: 8px 0;
        }
        
        .toc a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }
        
        .toc a:hover {
            color: #2980b9;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎮 URTS 강의 노트</h1>
            <p>Unity RTS 게임 개발 강의 정리 - 3페이지</p>
        </div>
        
        <div class="content">
            <!-- 목차 -->
            <div class="toc">
                <h3>📚 목차</h3>
                <ul>
                    <li><a href="#lecture-39">🎯 강의 39: Unit Commands in Behavior Tree</a></li>
                </ul>
            </div>

            <!-- 강의 39: Unit Commands in Behavior Tree (Behavior Tree에서 유닛 명령) -->
            <div class="lecture-section" id="lecture-39">
                <h2 class="lecture-title">🎯 강의 39: Unit Commands in Behavior Tree (Behavior Tree에서 유닛 명령)</h2>
                
                <div class="tech-stack" style="margin-top: 20px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px;">
                    <h4 style="color: #2c3e50; margin-top: 0;">🎯 이번 강의를 왜 해야 하는가?</h4>
                    <p style="margin: 8px 0;"><strong style="color: #2c3e50;">명령 체계 구축</strong>: <span style="color: #2c3e50;">유닛의 다양한 행동을 체계적으로 관리할 수 있는 명령 시스템</span></p>
                    <p style="margin: 8px 0;"><strong style="color: #2c3e50;">확장성 향상</strong>: <span style="color: #2c3e50;">새로운 유닛 기능을 쉽게 추가할 수 있는 구조</span></p>
                    <p style="margin: 8px 0;"><strong style="color: #2c3e50;">반응성 개선</strong>: <span style="color: #2c3e50;">명령 변경 시 즉시 반응하는 유닛 시스템</span></p>
                    <p style="margin: 8px 0;"><strong style="color: #2c3e50;">코드 분리</strong>: <span style="color: #2c3e50;">Behavior Tree와 명령 로직의 명확한 분리</span></p>
                </div>
                
                <div class="tech-stack" style="margin-top: 15px; background: #e8f5e8; border: 2px solid #28a745; border-radius: 8px;">
                    <h4 style="color: #155724; margin-top: 0;">🧒 초딩도 이해하기 쉬운 설명</h4>
                    <p style="margin: 8px 0; color: #155724;"><strong>🎯 명령이 뭐야?</strong></p>
                    <p style="margin: 8px 0; color: #155724;">게임에서 유닛에게 "이동해!", "멈춰!", "공격해!" 같은 지시를 내리는 시스템이에요. 마치 리모컨으로 TV를 조작하는 것과 같아요!</p>
                    
                    <p style="margin: 8px 0; color: #155724;"><strong>🎮 왜 필요한가요?</strong></p>
                    <p style="margin: 8px 0; color: #155724;">• <strong>다양한 행동</strong>: 유닛이 할 수 있는 여러 가지 행동을 관리해요</p>
                    <p style="margin: 8px 0; color: #155724;">• <strong>즉시 반응</strong>: 새로운 명령을 내리면 바로 행동을 바꿔요</p>
                    <p style="margin: 8px 0; color: #155724;">• <strong>체계적 관리</strong>: 모든 명령을 하나의 시스템으로 관리해요</p>
                    
                    <p style="margin: 8px 0; color: #155724;"><strong>🏠 집으로 비유하면?</strong></p>
                    <p style="margin: 8px 0; color: #155724;">집에서 "TV 켜줘!", "라디오 꺼줘!" 같은 명령을 내리는 것처럼, 게임에서도 유닛에게 명령을 내려요!</p>
                </div>

                <div class="lecture-goal">
                    <h3>🎯 학습 목표</h3>
                    <ul class="content-list">
                        <li>UnitCommands 열거형 생성 및 설정</li>
                        <li>Behavior Tree에서 Switch 노드 활용</li>
                        <li>StopAgentAction 커스텀 노드 구현</li>
                        <li>StopCommand 액션 베이스 구현</li>
                        <li>명령 변경 시 즉시 반응하는 시스템</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h3>🎯 명령 체계 설계</h3>
                    
                    <div class="tech-stack">
                        <h4>🎮 시스템 구성 요소</h4>
                        <ul class="content-list">
                            <li><strong>UnitCommands</strong>: 유닛 명령 열거형 (Stop, Move)</li>
                            <li><strong>Switch 노드</strong>: 명령에 따른 분기 처리</li>
                            <li><strong>Abort 노드</strong>: 명령 변경 시 즉시 중단</li>
                            <li><strong>StopAgentAction</strong>: 유닛 정지 커스텀 노드</li>
                            <li><strong>StopCommand</strong>: 정지 명령 액션 베이스</li>
                        </ul>
                    </div>

                    <div class="tech-stack">
                        <h4>🔄 명령 처리 플로우</h4>
                        <ol class="content-list">
                            <li><strong>명령 설정</strong>: Blackboard에 명령 값 설정</li>
                            <li><strong>Abort 트리거</strong>: 명령 변경 시 현재 실행 중단</li>
                            <li><strong>Switch 분기</strong>: 명령에 따라 다른 브랜치 실행</li>
                            <li><strong>액션 실행</strong>: 해당 명령의 행동 수행</li>
                            <li><strong>상태 관리</strong>: 명령 완료 또는 대기</li>
                        </ol>
                    </div>
                </div>

                <div class="content-section">
                    <h3>📝 UnitCommands 열거형</h3>
                    
                    <div class="code-block">
<span class="comment">// UnitCommands.cs - 유닛 명령 열거형</span>
<span class="comment">// BlackboardEnum: Unity Behavior Tree에서 사용할 수 있는 열거형</span>

<span class="keyword">using</span> <span class="class-name">Unity.Behavior</span>;

<span class="keyword">namespace</span> <span class="class-name">GameDevTV.RTS.Units</span>
{
    <span class="comment">// BlackboardEnum: Unity Behavior Tree의 Blackboard에서 사용할 수 있도록 하는 속성</span>
    <span class="comment">// 이 속성이 있으면 Behavior Tree 에디터에서 이 열거형을 선택할 수 있음</span>
    [<span class="class-name">BlackboardEnum</span>]
    
    <span class="comment">// UnitCommands: 유닛이 수행할 수 있는 명령들의 열거형</span>
    <span class="comment">// enum: 상수들의 집합을 정의하는 C# 키워드</span>
    <span class="keyword">public enum</span> <span class="class-name">UnitCommands</span>
    {
        <span class="comment">// Stop: 유닛을 정지시키는 명령</span>
        <span class="comment">// 첫 번째 값이므로 기본값은 0</span>
        <span class="property-name">Stop</span>,
        
        <span class="comment">// Move: 유닛을 이동시키는 명령</span>
        <span class="comment">// 두 번째 값이므로 기본값은 1</span>
        <span class="property-name">Move</span>
    }
}
</div>
                </div>

                <div class="content-section">
                    <h3>🛑 StopAgentAction 구현</h3>
                    
                    <div class="code-block">
<span class="comment">// StopAgentAction.cs - 유닛 정지 액션 노드</span>
<span class="comment">// Unity Behavior Tree의 커스텀 액션 노드</span>

<span class="keyword">using</span> <span class="class-name">System</span>;
<span class="keyword">using</span> <span class="class-name">Unity.Behavior</span>;
<span class="keyword">using</span> <span class="class-name">UnityEngine</span>;
<span class="keyword">using</span> <span class="class-name">Action</span> = <span class="class-name">Unity.Behavior.Action</span>;
<span class="keyword">using</span> <span class="class-name">Unity.Properties</span>;
<span class="keyword">using</span> <span class="class-name">UnityEngine.AI</span>;

<span class="keyword">namespace</span> <span class="class-name">GameDevTV.RTS.Behavior</span>
{
    <span class="comment">// Serializable: Unity에서 직렬화 가능하도록 하는 속성</span>
    <span class="comment">// GeneratePropertyBag: Unity Behavior Tree에서 사용하는 속성 백 생성</span>
    [<span class="class-name">Serializable</span>, <span class="class-name">GeneratePropertyBag</span>]
    
    <span class="comment">// NodeDescription: Behavior Tree 에디터에서 노드의 설명을 정의</span>
    <span class="comment">// name: 노드의 이름</span>
    <span class="comment">// story: 노드의 동작을 설명하는 텍스트 (Agent는 Blackboard 변수)</span>
    <span class="comment">// category: 노드가 속할 카테고리</span>
    <span class="comment">// id: 노드의 고유 식별자</span>
    [<span class="class-name">NodeDescription</span>(<span class="parameter">name</span>: <span class="string">"Stop Agent"</span>, <span class="parameter">story</span>: <span class="string">"[Agent] stops moving."</span>, <span class="parameter">category</span>: <span class="string">"Action/Navigation"</span>, <span class="parameter">id</span>: <span class="string">"b4af498b0656fc524515ec0b094c06a9"</span>)]
    
    <span class="comment">// StopAgentAction: 유닛을 정지시키는 액션 노드</span>
    <span class="comment">// partial: 클래스가 여러 파일에 나뉘어 정의될 수 있음 (Unity Behavior Tree가 자동 생성)</span>
    <span class="keyword">public partial class</span> <span class="class-name">StopAgentAction</span> : <span class="class-name">Action</span>
    {
        <span class="comment">// Agent: 정지시킬 유닛의 GameObject</span>
        <span class="comment">// SerializeReference: Unity에서 직렬화 가능한 참조</span>
        <span class="comment">// BlackboardVariable: Behavior Tree의 Blackboard에서 가져오는 변수</span>
        [<span class="class-name">SerializeReference</span>] <span class="keyword">public</span> <span class="class-name">BlackboardVariable</span>&lt;<span class="class-name">GameObject</span>&gt; <span class="property-name">Agent</span>;

        <span class="comment">// OnStart: 액션이 시작될 때 호출되는 메서드</span>
        <span class="comment">// Status: 액션의 실행 상태 (Success, Failure, Running)</span>
        <span class="keyword">protected override</span> <span class="class-name">Status</span> <span class="method-name">OnStart</span>()
        {
            <span class="comment">// Agent.Value: Blackboard에서 가져온 GameObject</span>
            <span class="comment">// TryGetComponent: 해당 GameObject에서 NavMeshAgent 컴포넌트를 가져옴</span>
            <span class="comment">// out agent: 가져온 NavMeshAgent를 agent 변수에 저장</span>
            <span class="keyword">if</span> (<span class="property-name">Agent</span>.<span class="property-name">Value</span>.<span class="method-name">TryGetComponent</span>(<span class="keyword">out</span> <span class="class-name">NavMeshAgent</span> <span class="field-name">agent</span>))
            {
                <span class="comment">// ResetPath: NavMeshAgent의 현재 경로를 초기화하고 정지</span>
                <span class="comment">// 이동 중이던 유닛을 즉시 정지시킴</span>
                <span class="field-name">agent</span>.<span class="method-name">ResetPath</span>();
                
                <span class="comment">// Success: 액션이 성공적으로 완료됨</span>
                <span class="keyword">return</span> <span class="class-name">Status</span>.<span class="property-name">Success</span>;
            }

            <span class="comment">// Failure: NavMeshAgent를 찾을 수 없어서 액션 실패</span>
            <span class="keyword">return</span> <span class="class-name">Status</span>.<span class="property-name">Failure</span>;
        }
    }
}
</div>
                </div>

                <div class="content-section">
                    <h3>🎮 StopCommand 구현</h3>
                    
                    <div class="code-block">
<span class="comment">// StopCommand.cs - 정지 명령 액션 베이스</span>
<span class="comment">// ActionBase: 모든 명령의 기본 클래스</span>

<span class="keyword">using</span> <span class="class-name">GameDevTV.RTS.Units</span>;
<span class="keyword">using</span> <span class="class-name">UnityEngine</span>;

<span class="keyword">namespace</span> <span class="class-name">GameDevTV.RTS.Commands</span>
{
    <span class="comment">// CreateAssetMenu: Unity Editor에서 이 클래스로부터 ScriptableObject를 생성할 수 있게 함</span>
    <span class="comment">// fileName: 생성될 파일의 기본 이름</span>
    <span class="comment">// menuName: Unity Editor 메뉴에서의 경로</span>
    <span class="comment">// order: 메뉴에서의 순서 (낮을수록 위에 표시)</span>
    [<span class="class-name">CreateAssetMenu</span>(<span class="parameter">fileName</span> = <span class="string">"Stop Action"</span>, <span class="parameter">menuName</span> = <span class="string">"AI/Commands/Stop"</span>, <span class="parameter">order</span> = <span class="number">101</span>)]
    
    <span class="comment">// StopCommand: 유닛을 정지시키는 명령</span>
    <span class="comment">// ActionBase: 모든 명령의 기본 클래스</span>
    <span class="keyword">public class</span> <span class="class-name">StopCommand</span> : <span class="class-name">ActionBase</span>
    {
        <span class="comment">// CanHandle: 이 명령을 처리할 수 있는지 확인</span>
        <span class="comment">// CommandContext: 명령의 컨텍스트 정보</span>
        <span class="comment">// 반환값: 이 명령을 처리할 수 있으면 true, 아니면 false</span>
        <span class="keyword">public override bool</span> <span class="method-name">CanHandle</span>(<span class="class-name">CommandContext</span> <span class="field-name">context</span>)
        {
            <span class="comment">// context.Commandable: 명령을 받을 수 있는 객체</span>
            <span class="comment">// AbstractUnit: 모든 유닛의 기본 클래스</span>
            <span class="comment">// is: 타입 확인 연산자</span>
            <span class="keyword">return</span> <span class="field-name">context</span>.<span class="property-name">Commandable</span> <span class="keyword">is</span> <span class="class-name">AbstractUnit</span>;
        }

        <span class="comment">// Handle: 실제 명령을 처리하는 메서드</span>
        <span class="comment">// CommandContext: 명령의 컨텍스트 정보</span>
        <span class="keyword">public override void</span> <span class="method-name">Handle</span>(<span class="class-name">CommandContext</span> <span class="field-name">context</span>)
        {
            <span class="comment">// AbstractUnit으로 타입 캐스팅</span>
            <span class="comment">// CanHandle에서 이미 AbstractUnit인지 확인했으므로 안전한 캐스팅</span>
            <span class="class-name">AbstractUnit</span> <span class="field-name">unit</span> = (<span class="class-name">AbstractUnit</span>)<span class="field-name">context</span>.<span class="property-name">Commandable</span>;
            
            <span class="comment">// unit.Stop(): 유닛의 정지 메서드 호출</span>
            <span class="comment">// 이 메서드는 Blackboard에 Stop 명령을 설정함</span>
            <span class="field-name">unit</span>.<span class="method-name">Stop</span>();
        }
    }
}
</div>
                </div>

                <div class="content-section">
                    <h3>🔄 Behavior Tree 구조</h3>
                    
                    <div class="tech-stack">
                        <h4>📊 트리 구조</h4>
                        <ol class="content-list">
                            <li><strong>OnStart</strong>: 트리 시작점</li>
                            <li><strong>Abort 노드</strong>: 명령 변경 시 즉시 중단</li>
                            <li><strong>Switch 노드</strong>: 명령에 따른 분기</li>
                            <li><strong>Stop 브랜치</strong>: StopAgentAction 실행</li>
                            <li><strong>Move 브랜치</strong>: MoveToTargetLocationAction 실행</li>
                        </ol>
                    </div>

                    <div class="tech-stack">
                        <h4>⚡ 즉시 반응 시스템</h4>
                        <ul class="content-list">
                            <li><strong>명령 변경 감지</strong>: Abort 노드가 명령 변경을 감지</li>
                            <li><strong>현재 실행 중단</strong>: 진행 중인 액션을 즉시 중단</li>
                            <li><strong>새 명령 실행</strong>: 변경된 명령에 따라 새로운 액션 시작</li>
                            <li><strong>상태 초기화</strong>: 이전 상태를 정리하고 새 상태로 전환</li>
                        </ul>
                    </div>
                </div>

                <div class="content-section">
                    <h3>❓ 왜 필요한가?</h3>
                    
                    <div class="tech-stack">
                        <h4>🎮 게임 개발 관점</h4>
                        <p><strong>명령 체계</strong>: 유닛의 다양한 행동을 체계적으로 관리</p>
                        <p><strong>반응성</strong>: 플레이어 명령에 즉시 반응하는 유닛</p>
                        <p><strong>확장성</strong>: 새로운 유닛 기능을 쉽게 추가</p>
                        <p><strong>일관성</strong>: 모든 유닛이 동일한 명령 체계 사용</p>
                    </div>

                    <div class="tech-stack">
                        <h4>🔧 기술적 장점</h4>
                        <p><strong>열거형 활용</strong>: 명령을 타입 안전하게 관리</p>
                        <p><strong>Switch 노드</strong>: 명령에 따른 분기 처리</p>
                        <p><strong>Abort 시스템</strong>: 명령 변경 시 즉시 반응</p>
                        <p><strong>커스텀 노드</strong>: 특정 기능을 위한 전용 노드</p>
                    </div>

                    <div class="tech-stack">
                        <h4>⚠️ 주의사항</h4>
                        <p><strong>명령 순서</strong>: Blackboard 값 설정 후 명령 설정</p>
                        <p><strong>네임스페이스</strong>: 열거형 생성 후 네임스페이스 이동</p>
                        <p><strong>노드 연결</strong>: Behavior Tree에서 올바른 연결 확인</p>
                        <p><strong>상태 관리</strong>: 명령 변경 시 이전 상태 정리</p>
                    </div>
                </div>

                <div class="content-section">
                    <h3>🎮 노바1492 적용 포인트</h3>
                    <ul class="content-list">
                        <li><strong>다양한 명령</strong>: 이동, 정지, 공격, 수집, 건설 등</li>
                        <li><strong>명령 우선순위</strong>: 긴급 명령이 일반 명령보다 우선</li>
                        <li><strong>명령 취소</strong>: 진행 중인 명령을 취소할 수 있는 기능</li>
                        <li><strong>명령 대기열</strong>: 여러 명령을 순서대로 실행</li>
                        <li><strong>조건부 명령</strong>: 특정 조건에서만 실행되는 명령</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h3>🔑 핵심 기술 개념</h3>
                    <ul class="content-list">
                        <li><strong>UnitCommands</strong>: 유닛 명령 열거형</li>
                        <li><strong>BlackboardEnum</strong>: Behavior Tree에서 사용 가능한 열거형</li>
                        <li><strong>Switch 노드</strong>: 명령에 따른 분기 처리</li>
                        <li><strong>Abort 노드</strong>: 명령 변경 시 즉시 중단</li>
                        <li><strong>StopAgentAction</strong>: 유닛 정지 커스텀 노드</li>
                        <li><strong>StopCommand</strong>: 정지 명령 액션 베이스</li>
                        <li><strong>ResetPath</strong>: NavMeshAgent 경로 초기화</li>
                        <li><strong>TryGetComponent</strong>: 안전한 컴포넌트 가져오기</li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
</body>
</html>
